package org.jenkinsci.plugins.ironmqnotifier;

import hudson.util.FormValidation;
import org.junit.Assert;
import org.junit.Test;

public class IronMQDescriptorClassTest {

    //TODO: I need some help to learn how to test these without forcing static
    //TODO: Originally, I was forcing the functions to static to be able to see them as I cannot initiate appropriate tests without making them static
    //TODO: unfortunately, that made it so that the forms would break...
    //TODO: work to be done one this.

    @Test
    public void FormCheckForValidQueueNameInDescriptor() {
        FormValidation validationTest;
        FormValidation expectedValidation = FormValidation.ok();
        IronMQDescriptor testDescriptor = new IronMQDescriptor();

        try {
            validationTest = testDescriptor.doCheckQueueName("testTEST");
        } catch (Exception exception) {
            validationTest = FormValidation.error(exception.getMessage());
        }

        Assert.assertEquals(expectedValidation, validationTest);

    }

    @Test
    public void FormCheckForInValidQueueNameInDescriptor() {

        FormValidation expectedNoToGet = FormValidation.ok();
        FormValidation testObject;

        IronMQDescriptor testDescriptor = new IronMQDescriptor();


        try {
            testObject = testDescriptor.doCheckQueueName("55");  // force error

        } catch (Exception exception) {

            testObject = FormValidation.error(exception.getMessage());
        }

        Assert.assertTrue(testObject != expectedNoToGet);

    }

    @Test
    public void FormCheckForInValidQueueNameEmptyString() {

        FormValidation expectedNoToGet = FormValidation.ok();
        FormValidation testObject;
        IronMQDescriptor testDescriptor = new IronMQDescriptor();

        try {
            testObject = testDescriptor.doCheckQueueName("");

        } catch (Exception exception) {

            testObject = FormValidation.error(exception.getMessage());
        }

        Assert.assertTrue(testObject != expectedNoToGet);

    }


}
